import{r as i,o as c,c as m,a as j,M as w,b,V as D,d as y,e as p,f as h,w as u,p as V,g as H,h as v,i as S,j as R,t as O,k as P,F as A,T as M,l as N,m as q,n as X,q as B,s as K,A as W,u as z}from"./vendor.7f5503ea.js";const F=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=t(o);fetch(o.href,r)}};F();var g=(e,n)=>{const t=e.__vccOpts||e;for(const[s,o]of n)t[s]=o;return t};const J={};function G(e,n){const t=i("router-view");return c(),m(t)}var U=g(J,[["render",G]]);const k=j.create({baseURL:{}.VITE_HOST});k.interceptors.response.use(e=>{const n=e.data;return e.status>=400?(globalThis.$message.error(e.data.message),Promise.reject(new Error(n.message||"Error"))):e},e=>(w.error(e.response.data.message),Promise.reject(e)));function Q(e){return k({url:"/api/login",method:"post",data:e})}function Y(){return k({url:"/api/logout",method:"delete"})}const x="arco_admin_template_token";function Z(){return b.get(x)}function ee(e){return b.set(x,e)}function te(){return b.remove(x)}const I=()=>({token:"token",name:"",avatar:"",role:null}),ne=I(),oe={async login({commit:e},n){try{const t=await Q(n);return e("SET_TOKEN",t.data.token),ee(t.data.token),!0}catch{return!1}},async logout({commit:e}){try{await Y()}catch{}te(),e("RESET_STATE")}},re={RESET_STATE:e=>{Object.assign(e,I())},SET_TOKEN:(e,n)=>{e.token=n}};var se={namespaced:!0,state:ne,actions:oe,mutations:re};const ae=new D.Store({modules:{user:se}}),ie="modulepreload",$={},ce="/arco_admin_template/dist/",f=function(n,t){return!t||t.length===0?n():Promise.all(t.map(s=>{if(s=`${ce}${s}`,s in $)return;$[s]=!0;const o=s.endsWith(".css"),r=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${r}`))return;const a=document.createElement("link");if(a.rel=o?"stylesheet":ie,o||(a.as="script",a.crossOrigin=""),a.href=s,document.head.appendChild(a),o)return new Promise((l,d)=>{a.addEventListener("load",l),a.addEventListener("error",d)})})).then(()=>n())};var ue="/arco_admin_template/dist/assets/icon.cff29bb4.svg";const le={methods:{async onMenuClick(e){switch(e){case"\u9000\u51FA\u767B\u5F55":await this.$store.dispatch("user/logout"),await this.$router.replace("/login");break;case"Github":window.open("https://github.com/zhaozhentao/arco_admin_template","_blank");break}}}},L=e=>(V("data-v-6ee40af6"),e=e(),H(),e),de={class:"layout-navbar"},pe={class:"navbar"},_e=L(()=>p("div",{class:"side-left"},[p("div",{style:{height:"38px"}},[p("img",{src:ue})]),p("h5",{class:"arco-typography brand"},"Arco Design")],-1)),me={class:"side-right"},he=L(()=>p("img",{alt:"avatar",src:"https://p1-arco.byteimg.com/tos-cn-i-uwbnlip3yd/3ee5f13fb09879ecb5185e440cef6eb9.png~tplv-uwbnlip3yd-webp.webp"},null,-1)),fe=v("Github"),ge=v("\u9000\u51FA\u767B\u5F55");function ye(e,n,t,s,o,r){const a=i("a-avatar"),l=i("a-doption"),d=i("a-dropdown");return c(),y("div",de,[p("div",pe,[_e,p("ul",me,[p("li",null,[h(d,{onSelect:r.onMenuClick},{content:u(()=>[h(l,null,{default:u(()=>[fe]),_:1}),h(l,null,{default:u(()=>[ge]),_:1})]),default:u(()=>[h(a,{size:32},{default:u(()=>[he]),_:1})]),_:1},8,["onSelect"])])])])])}var ve=g(le,[["render",ye],["__scopeId","data-v-6ee40af6"]]);const be={name:"SidebarItem",props:{item:{type:Object},parentPath:{type:String}},computed:{fullPath(){let e=this.item.path.startsWith("/")?this.item.path.substr(1):this.item.path;return e=this.parentPath+"/"+e,e.replaceAll("//","/")}}};function ke(e,n,t,s,o,r){const a=i("a-menu-item"),l=i("sidebar-item"),d=i("a-sub-menu");return t.item.children===void 0||t.item.children.length===1?(c(),m(a,{key:r.fullPath},S({default:u(()=>[v(" "+O(t.item.children===void 0?t.item.meta.title:t.item.children[0].meta.title),1)]),_:2},[t.item.children!==void 0?{name:"icon",fn:u(()=>[(c(),m(R(t.item.children[0].meta.icon)))])}:void 0]),1024)):(c(),m(d,{key:r.fullPath},S({title:u(()=>[v(O(t.item.meta.title),1)]),default:u(()=>[(c(!0),y(A,null,P(t.item.children,T=>(c(),m(l,{key:T.path,item:T,"parent-path":r.fullPath},null,8,["item","parent-path"]))),128))]),_:2},[t.item.meta.icon?{name:"icon",fn:u(()=>[(c(),m(R(t.item.meta.icon)))])}:void 0]),1024))}var xe=g(be,[["render",ke]]);const Ee={components:{sidebarItem:xe},computed:{routes(){return this.$router.options.routes.filter(e=>!e.hidden)},openedMenu(){return this.$route.path}},methods:{to(e){this.$router.push(e)}}};function Te(e,n,t,s,o,r){const a=i("sidebar-item"),l=i("a-menu");return c(),m(l,{style:{width:"220px",height:"100%",flexShrink:0},"default-selected-keys":[r.openedMenu],"auto-open":!0,onMenuItemClick:r.to,"show-collapse-button":""},{default:u(()=>[(c(!0),y(A,null,P(r.routes,d=>(c(),m(a,{key:d.path,item:d,"parent-path":""},null,8,["item"]))),128))]),_:1},8,["default-selected-keys","onMenuItemClick"])}var we=g(Ee,[["render",Te]]);const Se={components:{Navbar:ve,SideBar:we},props:{msg:String}},Re={class:"page-wrapper"},Oe={class:"content-wrapper"};function Pe(e,n,t,s,o,r){const a=i("navbar"),l=i("side-bar"),d=i("router-view");return c(),y("div",Re,[h(a),p("div",Oe,[h(l),h(M,{name:"fade-transform",mode:"out-in"},{default:u(()=>[h(d,{class:"content"})]),_:1})])])}var E=g(Se,[["render",Pe],["__scopeId","data-v-8799c49a"]]);const Ae=[{path:"/404",component:()=>f(()=>import("./404.c4c719e9.js"),["assets/404.c4c719e9.js","assets/vendor.7f5503ea.js"]),hidden:!0},{path:"/login",component:()=>f(()=>import("./index.4441c51b.js"),["assets/index.4441c51b.js","assets/index.25f5fd56.css","assets/vendor.7f5503ea.js"]),hidden:!0},{path:"/",component:E,meta:{title:"Example",icon:"icon-apps"},children:[{name:"table",path:"/table",component:()=>f(()=>import("./index.3935a565.js"),["assets/index.3935a565.js","assets/index.14fbe298.css","assets/vendor.7f5503ea.js"]),meta:{title:"table"}},{name:"form",path:"/form",component:()=>f(()=>import("./index.261a4a18.js"),["assets/index.261a4a18.js","assets/index.58975bd8.css","assets/vendor.7f5503ea.js"]),meta:{title:"form"}}]},{path:"/arco",component:E,children:[{path:"",component:()=>f(()=>import("./index.ffce9194.js"),[]),name:"Arco Design",meta:{title:"Arco Design Doc",icon:"icon-bytedance-color"}}]},{path:"/donate",component:E,children:[{path:"",name:"donate",component:()=>f(()=>import("./index.f996a7c1.js"),["assets/index.f996a7c1.js","assets/vendor.7f5503ea.js"]),meta:{title:"Donate",icon:"icon-thumb-up"}}]},{path:"/:catchAll(.*)",redirect:"/404",hidden:!0}],Ie=()=>N({history:q(),routes:Ae}),C=Ie();C.beforeEach(async(e,n,t)=>{if(e.path==="/login"){t();return}if(!Z()){w.info("\u8BF7\u5148\u767B\u5F55"),t("/login");return}t()});const _=B;function $e(e){_.XHR.prototype.__send=_.XHR.prototype.send,_.XHR.prototype.send=function(){if(this.custom.xhr&&(this.custom.xhr.withCredentials=this.withCredentials||!1,this.responseType&&(this.custom.xhr.responseType=this.responseType)),this.custom.requestHeaders){const n={};for(let t in this.custom.requestHeaders)n[t.toString().toLowerCase()]=this.custom.requestHeaders[t];this.custom.options=Object.assign({},this.custom.options,{headers:n})}this.__send.apply(this,arguments)},_.XHR.prototype.proxy_open=_.XHR.prototype.open,_.XHR.prototype.open=function(){let n=this.responseType;this.proxy_open(...arguments),this.custom.xhr&&n&&(this.custom.xhr.responseType=n)};for(const{url:n,method:t,response:s,timeout:o}of e)je(o),_.mock(X(n,void 0,{end:!1}),t||"get",Ce(s))}function Le(e){const n=e.split("?")[1];return n?JSON.parse('{"'+decodeURIComponent(n).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"').replace(/\+/g," ")+'"}'):{}}function Ce(e){return function(n){let t=null;if(typeof e=="function"){const{body:s,type:o,url:r,headers:a}=n;t=e({method:o,body:JSON.parse(s),query:Le(r),headers:a})}else t=e;return _.mock(t)}}function je(e=0){e&&_.setup({timeout:e})}var De=[{url:"/api/login",method:"post",statusCode:200,response:({body:e})=>({token:"user token",name:"Captain"})},{url:"/api/logout",method:"delete",statusCode:200,response:()=>({message:"success"})}];function Ve(){$e([...De])}K(U).use(W).use(z).use(ae).use(C).mount("#app");Ve();export{g as _};
