import{r as m,o as i,c as _,a as H,M as S,b,V as N,u as M,d as R,e as y,f as l,g as h,w as c,p as q,h as X,i as v,j as k,k as O,l as A,t as P,m as d,n as L,F as I,T as z,q as B,s as K,v as W,x as F,y as J,A as G,z as U}from"./vendor.466f03f8.js";const Q=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}};Q();var x=(e,t)=>{const o=e.__vccOpts||e;for(const[r,n]of t)o[r]=n;return o};const Y={};function Z(e,t){const o=m("router-view");return i(),_(o)}var ee=x(Y,[["render",Z]]);const E=H.create({baseURL:{}.VITE_HOST});E.interceptors.response.use(e=>{const t=e.data;return e.status>=400?(globalThis.$message.error(e.data.message),Promise.reject(new Error(t.message||"Error"))):e},e=>(S.error(e.response.data.message),Promise.reject(e)));function te(e){return E({url:"/api/login",method:"post",data:e})}function oe(){return E({url:"/api/logout",method:"delete"})}const T="arco_admin_template_token";function ne(){return b.get(T)}function re(e){return b.set(T,e)}function se(){return b.remove(T)}const $=()=>({token:"token",name:"",avatar:"",role:null}),ae=$(),ie={async login({commit:e},t){try{const o=await te(t);return e("SET_TOKEN",o.data.token),re(o.data.token),!0}catch{return!1}},async logout({commit:e}){try{await oe()}catch{}se(),e("RESET_STATE")}},ce={RESET_STATE:e=>{Object.assign(e,$())},SET_TOKEN:(e,t)=>{e.token=t}};var ue={namespaced:!0,state:ae,actions:ie,mutations:ce};const le=new N.Store({modules:{user:ue}}),de="modulepreload",j={},pe="/arco_admin_template/dist/",g=function(t,o){return!o||o.length===0?t():Promise.all(o.map(r=>{if(r=`${pe}${r}`,r in j)return;j[r]=!0;const n=r.endsWith(".css"),s=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${s}`))return;const a=document.createElement("link");if(a.rel=n?"stylesheet":de,n||(a.as="script",a.crossOrigin=""),a.href=r,document.head.appendChild(a),n)return new Promise((u,f)=>{a.addEventListener("load",u),a.addEventListener("error",f)})})).then(()=>t())};var me="/arco_admin_template/dist/assets/icon.cff29bb4.svg";const C=e=>(q("data-v-31d0bd97"),e=e(),X(),e),_e={class:"layout-navbar"},he={class:"navbar"},fe=C(()=>l("div",{class:"side-left"},[l("div",{style:{height:"38px"}},[l("img",{src:me})]),l("h5",{class:"arco-typography brand"},"Arco Design")],-1)),ge={class:"side-right"},ye=C(()=>l("img",{alt:"avatar",src:"https://p1-arco.byteimg.com/tos-cn-i-uwbnlip3yd/3ee5f13fb09879ecb5185e440cef6eb9.png~tplv-uwbnlip3yd-webp.webp"},null,-1)),ve=v("Github"),be=v("\u9000\u51FA\u767B\u5F55"),ke={setup(e){const t=M(),o=R(),r=async n=>{switch(n){case"\u9000\u51FA\u767B\u5F55":await t.dispatch("user/logout"),await o.replace("/login");break;case"Github":window.open("https://github.com/zhaozhentao/arco_admin_template","_blank");break}};return(n,s)=>{const a=m("a-avatar"),u=m("a-doption"),f=m("a-dropdown");return i(),y("div",_e,[l("div",he,[fe,l("ul",ge,[l("li",null,[h(f,{onSelect:r},{content:c(()=>[h(u,null,{default:c(()=>[ve]),_:1}),h(u,null,{default:c(()=>[be]),_:1})]),default:c(()=>[h(a,{size:32},{default:c(()=>[ye]),_:1})]),_:1})])])])])}}};var xe=x(ke,[["__scopeId","data-v-31d0bd97"]]);const D={props:{item:Object,parentPath:String},setup(e){const t=e,o=k(()=>{let r=t.item.path.startsWith("/")?t.item.path.substr(1):t.item.path;return r=t.parentPath+"/"+r,r.replaceAll("//","/")});return(r,n)=>{const s=m("a-menu-item"),a=m("a-sub-menu");return e.item.children===void 0||e.item.children.length===1?(i(),_(s,{key:d(o)},O({default:c(()=>[v(" "+P(e.item.children===void 0?e.item.meta.title:e.item.children[0].meta.title),1)]),_:2},[e.item.children!==void 0?{name:"icon",fn:c(()=>[(i(),_(A(e.item.children[0].meta.icon)))])}:void 0]),1024)):(i(),_(a,{key:d(o)},O({title:c(()=>[v(P(e.item.meta.title),1)]),default:c(()=>[(i(!0),y(I,null,L(e.item.children,u=>(i(),_(d(D),{key:u.path,item:u,"parent-path":d(o)},null,8,["item","parent-path"]))),128))]),_:2},[e.item.meta.icon?{name:"icon",fn:c(()=>[(i(),_(A(e.item.meta.icon)))])}:void 0]),1024))}}},Ee={setup(e){const t=R(),o=k(()=>t.options.routes.filter(s=>!s.hidden)),r=k(()=>t.currentRoute.value.path),n=s=>t.push(s);return(s,a)=>{const u=m("a-menu");return i(),_(u,{style:{width:"220px",height:"100%",flexShrink:0},"default-selected-keys":[d(r)],"auto-open":!0,onMenuItemClick:n,"show-collapse-button":""},{default:c(()=>[(i(!0),y(I,null,L(d(o),f=>(i(),_(d(D),{key:f.path,item:f,"parent-path":""},null,8,["item"]))),128))]),_:1},8,["default-selected-keys"])}}};const Te={class:"page-wrapper"},we={class:"content-wrapper"},Se={setup(e){return(t,o)=>{const r=m("router-view");return i(),y("div",Te,[h(d(xe)),l("div",we,[h(d(Ee)),h(z,{name:"fade-transform",mode:"out-in"},{default:c(()=>[h(r,{class:"content"})]),_:1})])])}}};var w=x(Se,[["__scopeId","data-v-22549843"]]);const Re=[{path:"/404",component:()=>g(()=>import("./404.f7d5040c.js"),["assets/404.f7d5040c.js","assets/vendor.466f03f8.js"]),hidden:!0},{path:"/login",component:()=>g(()=>import("./index.fd7d4967.js"),["assets/index.fd7d4967.js","assets/index.25f5fd56.css","assets/vendor.466f03f8.js"]),hidden:!0},{path:"/",component:w,meta:{title:"Example",icon:"icon-apps"},children:[{name:"table",path:"/table",component:()=>g(()=>import("./index.cb272f9e.js"),["assets/index.cb272f9e.js","assets/index.14fbe298.css","assets/vendor.466f03f8.js"]),meta:{title:"table"}},{name:"form",path:"/form",component:()=>g(()=>import("./index.5c9f07d4.js"),["assets/index.5c9f07d4.js","assets/index.58975bd8.css","assets/vendor.466f03f8.js"]),meta:{title:"form"}}]},{path:"/arco",component:w,children:[{path:"",component:()=>g(()=>import("./index.ffce9194.js"),[]),name:"Arco Design",meta:{title:"Arco Design Doc",icon:"icon-bytedance-color"}}]},{path:"/donate",component:w,children:[{path:"",name:"donate",component:()=>g(()=>import("./index.90ecf1fd.js"),["assets/index.90ecf1fd.js","assets/vendor.466f03f8.js"]),meta:{title:"Donate",icon:"icon-thumb-up"}}]},{path:"/:catchAll(.*)",redirect:"/404",hidden:!0}],Oe=()=>B({history:K(),routes:Re}),V=Oe();V.beforeEach(async(e,t,o)=>{if(e.path==="/login"){o();return}if(!ne()){S.info("\u8BF7\u5148\u767B\u5F55"),o("/login");return}o()});const p=F;function Ae(e){p.XHR.prototype.__send=p.XHR.prototype.send,p.XHR.prototype.send=function(){if(this.custom.xhr&&(this.custom.xhr.withCredentials=this.withCredentials||!1,this.responseType&&(this.custom.xhr.responseType=this.responseType)),this.custom.requestHeaders){const t={};for(let o in this.custom.requestHeaders)t[o.toString().toLowerCase()]=this.custom.requestHeaders[o];this.custom.options=Object.assign({},this.custom.options,{headers:t})}this.__send.apply(this,arguments)},p.XHR.prototype.proxy_open=p.XHR.prototype.open,p.XHR.prototype.open=function(){let t=this.responseType;this.proxy_open(...arguments),this.custom.xhr&&t&&(this.custom.xhr.responseType=t)};for(const{url:t,method:o,response:r,timeout:n}of e)Ie(n),p.mock(W(t,void 0,{end:!1}),o||"get",Le(r))}function Pe(e){const t=e.split("?")[1];return t?JSON.parse('{"'+decodeURIComponent(t).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"').replace(/\+/g," ")+'"}'):{}}function Le(e){return function(t){let o=null;if(typeof e=="function"){const{body:r,type:n,url:s,headers:a}=t;o=e({method:n,body:JSON.parse(r),query:Pe(s),headers:a})}else o=e;return p.mock(o)}}function Ie(e=0){e&&p.setup({timeout:e})}var $e=[{url:"/api/login",method:"post",statusCode:200,response:({body:e})=>({token:"user token",name:"Captain"})},{url:"/api/logout",method:"delete",statusCode:200,response:()=>({message:"success"})}];function je(){Ae([...$e])}J(ee).use(G).use(U).use(le).use(V).mount("#app");je();export{x as _};
