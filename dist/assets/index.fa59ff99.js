import{r as d,o as i,c as m,a as H,M as S,b,V as N,u as M,d as R,e as y,f as h,g as _,w as c,p as q,h as X,i as v,j as k,k as O,l as A,t as P,m as l,n as L,F as I,T as z,q as B,s as K,v as W,x as F,y as J,A as G,z as U}from"./vendor.466f03f8.js";const Q=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}};Q();var x=(e,t)=>{const o=e.__vccOpts||e;for(const[r,n]of t)o[r]=n;return o};const Y={};function Z(e,t){const o=d("router-view");return i(),m(o)}var ee=x(Y,[["render",Z]]);const E=H.create({baseURL:{}.VITE_HOST});E.interceptors.response.use(e=>{const t=e.data;return e.status>=400?(globalThis.$message.error(e.data.message),Promise.reject(new Error(t.message||"Error"))):e},e=>(S.error(e.response.data.message),Promise.reject(e)));function te(e){return E({url:"/api/login",method:"post",data:e})}function oe(){return E({url:"/api/logout",method:"delete"})}const T="arco_admin_template_token";function ne(){return b.get(T)}function re(e){return b.set(T,e)}function se(){return b.remove(T)}const j=()=>({token:"token",name:"",avatar:"",role:null}),ae=j(),ie={async login({commit:e},t){try{const o=await te(t);return e("SET_TOKEN",o.data.token),re(o.data.token),!0}catch{return!1}},async logout({commit:e}){try{await oe()}catch{}se(),e("RESET_STATE")}},ce={RESET_STATE:e=>{Object.assign(e,j())},SET_TOKEN:(e,t)=>{e.token=t}};var ue={namespaced:!0,state:ae,actions:ie,mutations:ce};const le=new N.Store({modules:{user:ue}}),pe="modulepreload",C={},de="/arco_admin_template/dist/",g=function(t,o){return!o||o.length===0?t():Promise.all(o.map(r=>{if(r=`${de}${r}`,r in C)return;C[r]=!0;const n=r.endsWith(".css"),s=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${s}`))return;const a=document.createElement("link");if(a.rel=n?"stylesheet":pe,n||(a.as="script",a.crossOrigin=""),a.href=r,document.head.appendChild(a),n)return new Promise((u,f)=>{a.addEventListener("load",u),a.addEventListener("error",f)})})).then(()=>t())};var me="/arco_admin_template/dist/assets/icon.cff29bb4.svg";const D=e=>(q("data-v-187f38d5"),e=e(),X(),e),_e={class:"navbar"},he=D(()=>h("div",{class:"side-left"},[h("div",{style:{height:"38px"}},[h("img",{src:me})]),h("h5",{class:"arco-typography brand"},"Arco Design")],-1)),fe={class:"side-right"},ge=D(()=>h("img",{alt:"avatar",src:"https://p1-arco.byteimg.com/tos-cn-i-uwbnlip3yd/3ee5f13fb09879ecb5185e440cef6eb9.png~tplv-uwbnlip3yd-webp.webp"},null,-1)),ye=v("Github"),ve=v("\u9000\u51FA\u767B\u5F55"),be={setup(e){const t=M(),o=R(),r=async n=>{switch(n){case"\u9000\u51FA\u767B\u5F55":await t.dispatch("user/logout"),await o.replace("/login");break;case"Github":window.open("https://github.com/zhaozhentao/arco_admin_template","_blank");break}};return(n,s)=>{const a=d("a-avatar"),u=d("a-doption"),f=d("a-dropdown");return i(),y("div",_e,[he,h("ul",fe,[h("li",null,[_(f,{onSelect:r},{content:c(()=>[_(u,null,{default:c(()=>[ye]),_:1}),_(u,null,{default:c(()=>[ve]),_:1})]),default:c(()=>[_(a,{size:32},{default:c(()=>[ge]),_:1})]),_:1})])])])}}};var ke=x(be,[["__scopeId","data-v-187f38d5"]]);const V={props:{item:Object,parentPath:String},setup(e){const t=e,o=k(()=>{let r=t.item.path.startsWith("/")?t.item.path.substr(1):t.item.path;return r=t.parentPath+"/"+r,r.replaceAll("//","/")});return(r,n)=>{const s=d("a-menu-item"),a=d("a-sub-menu");return e.item.children===void 0||e.item.children.length===1?(i(),m(s,{key:l(o)},O({default:c(()=>[v(" "+P(e.item.children===void 0?e.item.meta.title:e.item.children[0].meta.title),1)]),_:2},[e.item.children!==void 0?{name:"icon",fn:c(()=>[(i(),m(A(e.item.children[0].meta.icon)))])}:void 0]),1024)):(i(),m(a,{key:l(o)},O({title:c(()=>[v(P(e.item.meta.title),1)]),default:c(()=>[(i(!0),y(I,null,L(e.item.children,u=>(i(),m(l(V),{key:u.path,item:u,"parent-path":l(o)},null,8,["item","parent-path"]))),128))]),_:2},[e.item.meta.icon?{name:"icon",fn:c(()=>[(i(),m(A(e.item.meta.icon)))])}:void 0]),1024))}}},xe={setup(e){const t=R(),o=k(()=>t.options.routes.filter(s=>!s.hidden)),r=k(()=>t.currentRoute.value.path),n=s=>t.push(s);return(s,a)=>{const u=d("a-menu");return i(),m(u,{style:{width:"220px",height:"100%",flexShrink:0},"default-selected-keys":[l(r)],"auto-open":!0,onMenuItemClick:n,"show-collapse-button":""},{default:c(()=>[(i(!0),y(I,null,L(l(o),f=>(i(),m(l(V),{key:f.path,item:f,"parent-path":""},null,8,["item"]))),128))]),_:1},8,["default-selected-keys"])}}};const Ee={class:"page-wrapper"},Te={setup(e){return(t,o)=>{const r=d("router-view");return i(),y("div",Ee,[_(l(ke)),_(l(xe)),_(z,{name:"fade-transform",mode:"out-in"},{default:c(()=>[_(r,{class:"content"})]),_:1})])}}};var w=x(Te,[["__scopeId","data-v-642131dc"]]);const we=[{path:"/404",component:()=>g(()=>import("./404.9cf4036c.js"),["assets/404.9cf4036c.js","assets/vendor.466f03f8.js"]),hidden:!0},{path:"/login",component:()=>g(()=>import("./index.fd7d4967.js"),["assets/index.fd7d4967.js","assets/index.25f5fd56.css","assets/vendor.466f03f8.js"]),hidden:!0},{path:"/",component:w,meta:{title:"Example",icon:"icon-apps"},children:[{name:"table",path:"/table",component:()=>g(()=>import("./index.577b7058.js"),["assets/index.577b7058.js","assets/index.14fbe298.css","assets/vendor.466f03f8.js"]),meta:{title:"table"}},{name:"form",path:"/form",component:()=>g(()=>import("./index.10b03247.js"),["assets/index.10b03247.js","assets/index.58975bd8.css","assets/vendor.466f03f8.js"]),meta:{title:"form"}}]},{path:"/arco",component:w,children:[{path:"",component:()=>g(()=>import("./index.ffce9194.js"),[]),name:"Arco Design",meta:{title:"Arco Design Doc",icon:"icon-bytedance-color"}}]},{path:"/donate",component:w,children:[{path:"",name:"donate",component:()=>g(()=>import("./index.9ab1a361.js"),["assets/index.9ab1a361.js","assets/vendor.466f03f8.js"]),meta:{title:"Donate",icon:"icon-thumb-up"}}]},{path:"/:catchAll(.*)",redirect:"/404",hidden:!0}],Se=()=>B({history:K(),routes:we}),$=Se();$.beforeEach(async(e,t,o)=>{if(e.path==="/login"){o();return}if(!ne()){S.info("\u8BF7\u5148\u767B\u5F55"),o("/login");return}o()});const p=F;function Re(e){p.XHR.prototype.__send=p.XHR.prototype.send,p.XHR.prototype.send=function(){if(this.custom.xhr&&(this.custom.xhr.withCredentials=this.withCredentials||!1,this.responseType&&(this.custom.xhr.responseType=this.responseType)),this.custom.requestHeaders){const t={};for(let o in this.custom.requestHeaders)t[o.toString().toLowerCase()]=this.custom.requestHeaders[o];this.custom.options=Object.assign({},this.custom.options,{headers:t})}this.__send.apply(this,arguments)},p.XHR.prototype.proxy_open=p.XHR.prototype.open,p.XHR.prototype.open=function(){let t=this.responseType;this.proxy_open(...arguments),this.custom.xhr&&t&&(this.custom.xhr.responseType=t)};for(const{url:t,method:o,response:r,timeout:n}of e)Pe(n),p.mock(W(t,void 0,{end:!1}),o||"get",Ae(r))}function Oe(e){const t=e.split("?")[1];return t?JSON.parse('{"'+decodeURIComponent(t).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"').replace(/\+/g," ")+'"}'):{}}function Ae(e){return function(t){let o=null;if(typeof e=="function"){const{body:r,type:n,url:s,headers:a}=t;o=e({method:n,body:JSON.parse(r),query:Oe(s),headers:a})}else o=e;return p.mock(o)}}function Pe(e=0){e&&p.setup({timeout:e})}var Le=[{url:"/api/login",method:"post",statusCode:200,response:({body:e})=>({token:"user token",name:"Captain"})},{url:"/api/logout",method:"delete",statusCode:200,response:()=>({message:"success"})}];function Ie(){Re([...Le])}J(ee).use(G).use(U).use(le).use($).mount("#app");Ie();export{x as _};
