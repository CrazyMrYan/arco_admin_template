import{r as h,o as i,c as d,a as N,M as P,b as E,V as M,u as q,d as L,e as v,f as m,g as _,w as c,p as j,h as X,i as y,j as k,k as S,l as R,t as O,m as p,n as I,F as $,T as z,q as B,s as K,v as W,x as F,y as J,A as U,z as G}from"./vendor.59da30f5.js";const Q=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}};Q();var T=(e,t)=>{const o=e.__vccOpts||e;for(const[r,n]of t)o[r]=n;return o};const Y={};function Z(e,t){const o=h("router-view");return i(),d(o)}var ee=T(Y,[["render",Z]]);const w=N.create({baseURL:{}.VITE_HOST});w.interceptors.response.use(e=>{const t=e.data;return e.status>=400?(globalThis.$message.error(e.data.message),Promise.reject(new Error(t.message||"Error"))):e},e=>(P.error(e.response.data.message),Promise.reject(e)));function te(e){return w({url:"/api/login",method:"post",data:e})}function oe(){return w({url:"/api/logout",method:"delete"})}const x="arco_admin_template_token";function ne(){return E.get(x)}function re(e){return E.set(x,e)}function se(){return E.remove(x)}const C=()=>({token:"token",name:"",avatar:"",role:null}),ae=C(),ie={async login({commit:e},t){try{const o=await te(t);return e("SET_TOKEN",o.data.token),re(o.data.token),!0}catch{return!1}},async logout({commit:e}){try{await oe()}catch{}se(),e("RESET_STATE")}},ce={RESET_STATE:e=>{Object.assign(e,C())},SET_TOKEN:(e,t)=>{e.token=t}};var ue={namespaced:!0,state:ae,actions:ie,mutations:ce};const le=new M.Store({modules:{user:ue}}),pe="modulepreload",A={},de="/arco_admin_template/dist/",g=function(t,o){return!o||o.length===0?t():Promise.all(o.map(r=>{if(r=`${de}${r}`,r in A)return;A[r]=!0;const n=r.endsWith(".css"),s=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${s}`))return;const a=document.createElement("link");if(a.rel=n?"stylesheet":pe,n||(a.as="script",a.crossOrigin=""),a.href=r,document.head.appendChild(a),n)return new Promise((u,f)=>{a.addEventListener("load",u),a.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t())};var me="/arco_admin_template/dist/assets/icon.cff29bb4.svg";const V=e=>(j("data-v-187f38d5"),e=e(),X(),e),_e={class:"navbar"},he=V(()=>m("div",{class:"side-left"},[m("div",{style:{height:"38px"}},[m("img",{src:me})]),m("h5",{class:"arco-typography brand"},"Arco Design")],-1)),fe={class:"side-right"},ge=V(()=>m("img",{alt:"avatar",src:"https://p1-arco.byteimg.com/tos-cn-i-uwbnlip3yd/3ee5f13fb09879ecb5185e440cef6eb9.png~tplv-uwbnlip3yd-webp.webp"},null,-1)),ye=y("Github"),ve=y("\u9000\u51FA\u767B\u5F55"),be={setup(e){const t=q(),o=L(),r=async n=>{switch(n){case"\u9000\u51FA\u767B\u5F55":await t.dispatch("user/logout"),await o.replace("/login");break;case"Github":window.open("https://github.com/zhaozhentao/arco_admin_template","_blank");break}};return(n,s)=>{const a=h("a-avatar"),u=h("a-doption"),f=h("a-dropdown");return i(),v("div",_e,[he,m("ul",fe,[m("li",null,[_(f,{onSelect:r},{content:c(()=>[_(u,null,{default:c(()=>[ye]),_:1}),_(u,null,{default:c(()=>[ve]),_:1})]),default:c(()=>[_(a,{size:32},{default:c(()=>[ge]),_:1})]),_:1})])])])}}};var ke=T(be,[["__scopeId","data-v-187f38d5"]]);const D={props:{item:Object,parentPath:String},setup(e){const t=e,o=k(()=>{let r=t.item.path.startsWith("/")?t.item.path.substr(1):t.item.path;return r=t.parentPath+"/"+r,r.replaceAll("//","/")});return(r,n)=>{const s=h("a-menu-item"),a=h("a-sub-menu");return e.item.children===void 0||e.item.children.length===1?(i(),d(s,{key:p(o)},S({default:c(()=>[y(" "+O(e.item.children===void 0?e.item.meta.title:e.item.children[0].meta.title),1)]),_:2},[e.item.children!==void 0?{name:"icon",fn:c(()=>[(i(),d(R(e.item.children[0].meta.icon)))])}:void 0]),1024)):(i(),d(a,{key:p(o)},S({title:c(()=>[y(O(e.item.meta.title),1)]),default:c(()=>[(i(!0),v($,null,I(e.item.children,u=>(i(),d(p(D),{key:u.path,item:u,"parent-path":p(o)},null,8,["item","parent-path"]))),128))]),_:2},[e.item.meta.icon?{name:"icon",fn:c(()=>[(i(),d(R(e.item.meta.icon)))])}:void 0]),1024))}}},Ee={setup(e){const t=L(),o=k(()=>t.options.routes.filter(s=>!s.hidden)),r=k(()=>t.currentRoute.value.path),n=s=>t.push(s);return(s,a)=>{const u=h("a-menu");return i(),d(u,{style:{width:"220px",height:"100%",flexShrink:0,paddingTop:"50px"},"default-selected-keys":[p(r)],"auto-open":!0,onMenuItemClick:n,"show-collapse-button":""},{default:c(()=>[(i(!0),v($,null,I(p(o),f=>(i(),d(p(D),{key:f.path,item:f,"parent-path":""},null,8,["item"]))),128))]),_:1},8,["default-selected-keys"])}}};const Te={class:"page-wrapper"},we={class:"content-wrapper"},xe={setup(e){return(t,o)=>{const r=h("router-view");return i(),v("div",Te,[_(p(ke)),m("div",we,[_(p(Ee)),_(z,{name:"fade-transform",mode:"out-in"},{default:c(()=>[_(r,{class:"content"})]),_:1})])])}}};var b=T(xe,[["__scopeId","data-v-0ad3fca7"]]);const Se=[{path:"/404",component:()=>g(()=>import("./404.e4371070.js"),["assets/404.e4371070.js","assets/vendor.59da30f5.js"]),hidden:!0},{path:"/login",component:()=>g(()=>import("./index.bcd2172c.js"),["assets/index.bcd2172c.js","assets/index.9dfb89a6.css","assets/vendor.59da30f5.js"]),hidden:!0},{path:"/",component:b,meta:{title:"Example",icon:"icon-apps"},children:[{name:"table",path:"/table",component:()=>g(()=>import("./index.feceda2c.js"),["assets/index.feceda2c.js","assets/index.14fbe298.css","assets/vendor.59da30f5.js"]),meta:{title:"table"}},{name:"form",path:"/form",component:()=>g(()=>import("./index.cb8f1854.js"),["assets/index.cb8f1854.js","assets/index.58975bd8.css","assets/vendor.59da30f5.js"]),meta:{title:"form"}}]},{path:"/arco",component:b,children:[{path:"",component:()=>g(()=>import("./index.ffce9194.js"),[]),name:"Arco Design",meta:{title:"Arco Design Doc",icon:"icon-bytedance-color"}}]},{path:"/editor",component:b,children:[{path:"",name:"editor",component:()=>g(()=>import("./index.1a57cb72.js"),["assets/index.1a57cb72.js","assets/index.594a5c03.css","assets/vendor.59da30f5.js"]),meta:{title:"editor",icon:"icon-edit"}}]},{path:"/:catchAll(.*)",redirect:"/404",hidden:!0}],Re=()=>B({history:K(),routes:Se}),H=Re();H.beforeEach(async(e,t,o)=>{if(e.path==="/login"){o();return}if(!ne()){P.info("\u8BF7\u5148\u767B\u5F55"),o("/login");return}o()});const l=F;function Oe(e){l.XHR.prototype.__send=l.XHR.prototype.send,l.XHR.prototype.send=function(){if(this.custom.xhr&&(this.custom.xhr.withCredentials=this.withCredentials||!1,this.responseType&&(this.custom.xhr.responseType=this.responseType)),this.custom.requestHeaders){const t={};for(let o in this.custom.requestHeaders)t[o.toString().toLowerCase()]=this.custom.requestHeaders[o];this.custom.options=Object.assign({},this.custom.options,{headers:t})}this.__send.apply(this,arguments)},l.XHR.prototype.proxy_open=l.XHR.prototype.open,l.XHR.prototype.open=function(){let t=this.responseType;this.proxy_open(...arguments),this.custom.xhr&&t&&(this.custom.xhr.responseType=t)};for(const{url:t,method:o,response:r,timeout:n}of e)Le(n),l.mock(W(t,void 0,{end:!1}),o||"get",Pe(r))}function Ae(e){const t=e.split("?")[1];return t?JSON.parse('{"'+decodeURIComponent(t).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"').replace(/\+/g," ")+'"}'):{}}function Pe(e){return function(t){let o=null;if(typeof e=="function"){const{body:r,type:n,url:s,headers:a}=t;o=e({method:n,body:JSON.parse(r),query:Ae(s),headers:a})}else o=e;return l.mock(o)}}function Le(e=0){e&&l.setup({timeout:e})}var Ie=[{url:"/api/login",method:"post",statusCode:200,response:({body:e})=>({token:"user token",name:"Captain"})},{url:"/api/logout",method:"delete",statusCode:200,response:()=>({message:"success"})}];function $e(){Oe([...Ie])}J(ee).use(U).use(G).use(le).use(H).mount("#app");$e();export{T as _};
